define(function(e,t,a){"use strict";var n=e("jquery");n.fn.ejDate=function(e){var t,a=this,i={},c=new Date,r=c.getFullYear(),d=c.getMonth()+1,o={yearULV:c.getFullYear(),yearDLV:1970};"undefined"!=typeof e&&(o.yearULV=e.yearULV||o.yearULV,o.yearDLV=e.yearDLV||o.yearDLV,o.disabledDateReg=e.disabledDateReg||o.disabledDateReg,o.checkedDateFunc=e.checkedDateFunc||o.checkedDateFunc);var l=function(){i.mainElem=n('<div class="ejdate-main">').html('<table><caption>                        <span class="btn-cut before-date"></span>                        <select class="select-year"></select>                        <select class="select-month"></select>                        <span class="btn-cut after-date"></span></caption>                        <thead><tr><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th>六</th><th>七</th></tr></thead>                        <tbody></tbody></table>'),a.wrap('<div class="ejdate-wrap">'),a.after(i.mainElem),i.targetInput=a,i.selectYear=i.mainElem.find(".select-year"),i.selectMonth=i.mainElem.find(".select-month"),i.btnBefore=i.mainElem.find(".before-date"),i.btnAfterDate=i.mainElem.find(".after-date"),i.tbody=i.mainElem.find("table tbody"),i.targetInput.attr("readonly","readonly"),s(),h(),i.btnBefore.click(function(){f(new Date(r,d-1-1)),p()}),i.btnAfterDate.click(function(){f(new Date(r,d-1+1)),p()}),i.selectYear.change(function(){f(new Date(this.value,d-1))}),i.selectMonth.change(function(){f(new Date(r,this.value-1))}),i.tbody.on("click",".day-normal",function(e){a.setDate(r,d,n(this).html()),n(this).addClass("active");var c=r+"-"+d+"-"+n(this).html();i.targetInput.val(c),"function"==typeof o.checkedDateFunc&&o.checkedDateFunc(t),i.mainElem.hide()}),i.targetInput.click(function(e){i.mainElem.show(),e.stopPropagation()}),n(document).click(function(){i.mainElem.hide()}),i.mainElem.click(function(e){e.stopPropagation()}),i.mainElem.hide()},s=function(){var e,t;for(t=o.yearULV;t>=o.yearDLV;t--)e=n("<option>"+t+"年</option>").val(t),t===r&&(e[0].selected=!0),i.selectYear.append(e);for(t=1;t<=12;t++)e=n("<option>"+t+"月</option>").val(t),t===d&&(e[0].selected=!0),i.selectMonth.append(e)},h=function(){i.tbody.html("");var e,t,a,r,d=u(c);for(e=n("<tr></tr>"),a=0;a<d.length;a++){r=d[a].substring(d[a].indexOf("-")+1),t=n("<td></td>").html(r),e.append(t);var o=d[a].indexOf("dimmed")!==-1;o||y(r)?t.addClass("day-dimmed"):t.addClass("day-normal"),D(r)&&!o&&t.addClass("active"),(a+1)%7===0&&(i.tbody.append(e),41!==a&&(e=n("<tr></tr>")))}},f=function(e){var t=e.getFullYear();return!(t>o.yearULV||t<o.yearDLV)&&(c=e,r=t,d=c.getMonth()+1,void h())},u=function(e){var t,a=m(r,d),n=m(r,d-1),i=new Date(r,d-1,1).getDay(),c=6-(7-i),o=[],l=n-c;for(t=0;t<c;t++)o[t]="dimmed-"+(l+t+1);for(t=1;t<=a;t++)o.push("normal-"+t);for(t=1;o.length<42;t++)o.push("dimmed-"+t);return o},m=function(e,t){var a;return a=2===t?e%4===0?29:28:1===t||3===t||5===t||7===t||8===t||10===t||12===t?31:30},p=function(){i.selectYear.find("option").each(function(){n(this).text()==r+"年"&&(n(this)[0].selected=!0)}),i.selectMonth.find("option").each(function(){n(this).text()==d+"月"&&(n(this)[0].selected=!0)})},y=function(e){if(o.disabledDateReg){var t,a=r+"y"+d+"m"+e+"d";return t=o.disabledDateReg.test(a)}},D=function(e){if(t){var a=t.getFullYear()===r,n=t.getMonth()+1===d,i=t.getDate()==e,c=a&&n&&i;return c}};return n.extend(this,{getDate:function(){return t},setDate:function(e,a,n){i.tbody.find(".active").removeClass("active"),t=new Date(e,a-1,n)}}),l(),this}});
//# sourceMappingURL=ejDate.min.js.map
